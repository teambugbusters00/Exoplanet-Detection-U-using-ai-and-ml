services:
  # Unified Full-Stack Service (Backend + Frontend)
  - type: web
    name: nasa-exoplanet-fullstack
    env: python
    buildCommand: |
      # Install Python dependencies
      python --version &&
      python -m pip install --upgrade pip &&
      pip install -r requirements.txt &&

      # Install Node.js and build React frontend
      curl -fsSL https://deb.nodesource.com/setup_18.x | bash - &&
      apt-get install -y nodejs &&
      npm install &&
      npm run build
    startCommand: python api_predict.py
    autoDeploy: false
    healthCheckPath: /
    envVars:
      - key: PYTHON_VERSION
        value: 3.9.0
    disk:
      name: model-storage
      mountPath: /opt/render/project/src
      sizeGB: 1
